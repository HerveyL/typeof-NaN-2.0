!(function _core_wrap(g,f,c,a){var e=g.ir=g.ir||{},d=e.components=e.components||{},h=(function b(){var o={},q={},u={},l={},r=function r(){};q.registerApplication=function y(z){if(Object.type(z)==="Object"){l=z}else{q.error({type:"type",origin:"Core",name:"_registerApplication",msg:"object was expected, received "+Object.type(z)+" instead"})}return q};q.registerSandbox=function j(z){if(typeof z==="function"){r=z}else{q.error({type:"type",origin:"Core",name:"_registerSandbox",msg:"function was expected, received "+Object.type(z)+" instead"})}return q};q.registerModule=function i(A,z){if(typeof A==="string"&&typeof z==="function"){if(!(A in o)){o[A]={creator:z,instance:null}}else{q.error({type:"custom",origin:"Core",name:"_registerModule",msg:'Module name "'+A+'" already registered'})}return this}else{q.error({type:"type",origin:"Core",name:"_registerModule",msg:"string/function pair expected, received "+Object.type(A)+"/"+Object.type(z)+" instead"})}return q};q.start=function m(A){if(A in o){var B=o[A];try{if(B.instance&&!B.instance.multipleInstances){throw new Error('Module "'+A+'" does not allow multiple instances')}B.instance=B.creator(new r(this),l);B.instance.init()}catch(z){q.error({type:"unknown",origin:"Core",name:"_start",msg:'unable to load module "'+A+'". Error was: '+z.message+"\n\nStacktrace:\n"+u.formatStacktrace(z.stack||z.stacktrace)})}}return q};q.stop=function p(A){if(A in o){var B=o[A];try{if(B.instance){B.instance.destroy();B.instance=null}}catch(z){q.error({type:"unknown",origin:"Core",name:"_stop",msg:'unable to unload module "'+A+'". Error was: '+z.message+"\n\nStacktrace: "+u.formatStacktrace(z.stack||z.stacktrace)})}}return q};q.startAll=function t(){Object.keys(o).forEach(function z(A){q.start(A)});return q};q.stopAll=function x(){Object.keys(o).forEach(function z(A){q.stop(A)});return q};q.error=function v(A){if(Object.type(A)==="Object"){if(typeof A.type==="string"){var z="\n\nOrigin: "+(A.origin||"General")+"\nCalling context: "+(A.name||"Unknown")+"\nMessage: "+(A.msg||"");switch(A.type.toLowerCase()){case"type":throw new TypeError(z);case"reference":throw new ReferenceError(z);case"syntax":throw new SyntaxError(z);default:throw new Error(A.type+z)}}else{throw new TypeError("Core: error() called with wrong arguments")}}return q};q.Promise=function s(){u.verify(this);return c.Deferred.apply(null,arguments)};q.when=function n(){u.verify(this);return c.when.apply(null,arguments)};q.extend=function k(){u.verify(this);return c.extend.apply(null,arguments)};q.plugin=function w(z){if(typeof z==="function"){z.apply(q,[g,f,c,u,q,r,l])}return q};u.verify=function(z){if(z.sb!==r){q.error({type:"reference",origin:"Core",name:"verify() -> "+(z.name||"(no caller available)"),msg:"Unauthorized call of Core method. Call this method through the Sandbox only"})}};u.formatStacktrace=function(A){if(Object.type(A)==="String"){var z=A.split(/\n/);if(z&&z.length){return z.map(function(B){var C=B.split(/@/);if(C&&C.length){if(Object.type(C[1])==="String"){return C[0].substr(0,40)+"\t->\t"+C[1].substr(C[1].lastIndexOf("/")).slice(1,40)}}}).join("\n")}}return""};return q}());d.Core=h}(window,window.document,jQuery));