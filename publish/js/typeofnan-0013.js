!(function _toolkit_wrap(e,t,c){var j=Object.prototype.toString;Date.now=Date.now||function h(){return(new Date()).getTime()};Object.keys=Object.keys||function d(x){var v=[],w,u=Object.prototype.hasOwnProperty;for(w in x){if(u.call(x,w)){v.push(w)}}return v};Object.type=function o(v){var u=j.call(v).split(" ")[1].replace("]","");if(v===e){return"Window"}else{if(u==="Window"||u==="Global"){return"Undefined"}else{if(u.indexOf("HTML")===0){return"Node"}}}return u};Object.hasKeys=function p(w,v){if(typeof v==="string"){v=v.split(/\s/)}if(Object.type(w)==="Object"){if(Object.type(v)==="Array"){return v.every(function u(x){return x in w})}}return false};Object.map=function a(w,u){if(Object.type(w)==="Object"&&Object.type(u)==="Function"){Object.keys(w).forEach(function v(y){(function x(z,A){if(A&&A.length){w[A[0]||z]=A[1];if(A[0]&&z!==A[0]){delete w[z]}}}(y,u.apply(w,[y,w[y]])))})}};Object.lookup=(function i(){var u={};return function v(D,x){var w=null,A=[],B="";if(typeof D==="string"){if(u[D]){A=u[D].chain;w=u[D].check}else{D.split(/\./).forEach(function C(G,F,E){if(w){if(G in w){A.push(w=w[G]);B=G}else{if(!x){throw new TypeError('cannot resolve "'+G+'" in '+B)}}}else{A.push(w=e[G])}});u[D]={chain:A,check:w}}}return{execute:function z(){return typeof w==="function"?w.apply(A[A.length-2],arguments):null},get:function y(){return w}}}}());Array.prototype.indexOf=Array.prototype.indexOf||function s(x){if(this===c||this===null){throw new TypeError("Array.prototype.indexOf")}var w=this instanceof Object?this:new Object(this),u=w.length>>>0,y=0,v=0;if(!u){return -1}if(arguments.length>1){y=+arguments[1];if(y!==y){y=0}else{if(y!==0&&y!==(1/0)&&y!==-(1/0)){y=(y>0||-1)*(~~(Math.abs(y)))}}}if(y>=u){return -1}v=y>=0?y:Math.max(u-Math.abs(y),0);for(;v<u;v++){if(v in w&&w[v]===x){return v}}return -1};Array.prototype.lastIndexOf=Array.prototype.lastIndexOf||function n(x){if(this===c||this===null){throw new TypeError("Array.prototype.lastIndexOf")}var w=this instanceof Object?this:new Object(this),u=w.length>>>0,y=u,v=0;if(!u){return -1}if(arguments.length>1){y=+arguments[1];if(y!==y){y=0}else{if(y!==0&&y!==(1/0)&&y!==-(1/0)){y=(y>0||-1)*(~~(Math.abs(y)))}}}v=y>=0?Math.min(y,u-1):u-Math.abs(y);while(v--){if(v in w&&w[v]===x){return v}}return -1};Array.prototype.filter=Array.prototype.filter||function q(A){if(this===c||this===null){throw new TypeError("Array.prototype.filter")}var x=this instanceof Object?this:new Object(this),u=x.length>>>0,w=[],v=0,z=arguments[1],y=null;if(typeof A!=="function"){throw new TypeError("Array.prototype.filter")}for(v=0;v<u;v++){if(v in x){y=x[v];if(A.call(z,y,v,x)){w.push(y)}}}return w};Array.prototype.map=Array.prototype.map||function a(z){if(this===c||this===null){throw new TypeError("Array.prototype.map")}var x=this instanceof Object?this:new Object(this),u=x.length>>>0,w=[],v=0,y=arguments[1];if(typeof z!=="function"){throw new TypeError("Array.prototype.map")}for(v=0;v<u;v++){if(v in x){w[v]=z.call(y,x[v],v,x)}}return w};Array.prototype.forEach=Array.prototype.forEach||function g(y){if(this===c||this===null){throw new TypeError("Array.prototype.forEach")}var w=this instanceof Object?this:new Object(this),u=w.length>>>0,v=0,x=arguments[1];if(typeof y!=="function"){throw new TypeError("Array.prototype.forEach")}for(v=0;v<u;v++){if(v in w){y.call(x,w[v],v,w)}}};Array.prototype.every=Array.prototype.every||function m(y){if(this===c||this===null){throw new TypeError("Array.prototype.every")}var w=this instanceof Object?this:new Object(this),u=w.length>>>0,v=0,x=arguments[1];if(typeof y!=="function"){throw new TypeError("Array.prototype.every")}for(v=0;v<u;v++){if(v in w&&!y.call(x,w[v],v,w)){return false}}return true};Array.prototype.some=Array.prototype.some||function b(y){if(this===c||this===null){throw new TypeError("Array.prototype.some")}var w=this instanceof Object?this:new Object(this),u=w.length>>>0,v=0,x=arguments[1];if(typeof y!=="function"){throw new TypeError("Array.prototype.some")}for(v=0;v<u;v++){if(v in w&&y.call(x,w[v],v,w)){return true
}}return false};e.requestAnimFrame=(function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function u(v){setTimeout(function(){if("hasFocus" in t){if(t.hasFocus()){v()}else{u(v)}}else{v()}},1000/60)}}());e._ie_garbage_collect=function(u){if(Object.type(u)!=="Array"){u=[u]}u.forEach(function(w){for(var x in w){if(typeof w[x]==="function"){var v="_"+x;if(v in w){w[v]=null}}}})};if(!("JSON" in e)){var r=t.createElement("script"),f=t.head||t.getElementsByTagName("head")[0]||t.documentElement;r.async="async";r.src="/js/components/json2.js";r.type="text/javascript";r.onload=r.onreadystatechange=function k(){if(!r.readyState||/loaded|complete/.test(r.readyState)){r.onload=r.onreadystatechange=null;r=c}};r.onerror=function l(){throw new Error("toolkit.js: JSON not available.")};f.insertBefore(r,f.firstChild)}if(!("console" in e)){e.console={};"debug info warn exception assert dir dirxml trace group groupEnd time timeEnd profile profileEnd table log error".split(/\s/).forEach(function(u){e.console[u]=function(){}})}}(window,window.document));!(function _core_wrap(g,f,c,a){var e=g.ir=g.ir||{},d=e.components=e.components||{},h=(function b(){var o={},q={},u={},l={},r=function r(){};q.registerApplication=function y(z){if(Object.type(z)==="Object"){l=z}else{q.error({type:"type",origin:"Core",name:"_registerApplication",msg:"object was expected, received "+Object.type(z)+" instead"})}return q};q.registerSandbox=function j(z){if(typeof z==="function"){r=z}else{q.error({type:"type",origin:"Core",name:"_registerSandbox",msg:"function was expected, received "+Object.type(z)+" instead"})}return q};q.registerModule=function i(A,z){if(typeof A==="string"&&typeof z==="function"){if(!(A in o)){o[A]={creator:z,instance:null}}else{q.error({type:"custom",origin:"Core",name:"_registerModule",msg:'Module name "'+A+'" already registered'})}return this}else{q.error({type:"type",origin:"Core",name:"_registerModule",msg:"string/function pair expected, received "+Object.type(A)+"/"+Object.type(z)+" instead"})}return q};q.start=function m(A){if(A in o){var B=o[A];try{if(B.instance&&!B.instance.multipleInstances){throw new Error('Module "'+A+'" does not allow multiple instances')}B.instance=B.creator(new r(this),l);B.instance.init()}catch(z){q.error({type:"unknown",origin:"Core",name:"_start",msg:'unable to load module "'+A+'". Error was: '+z.message+"\n\nStacktrace:\n"+u.formatStacktrace(z.stack||z.stacktrace)})}}return q};q.stop=function p(A){if(A in o){var B=o[A];try{if(B.instance){B.instance.destroy();B.instance=null}}catch(z){q.error({type:"unknown",origin:"Core",name:"_stop",msg:'unable to unload module "'+A+'". Error was: '+z.message+"\n\nStacktrace: "+u.formatStacktrace(z.stack||z.stacktrace)})}}return q};q.startAll=function t(){Object.keys(o).forEach(function z(A){q.start(A)});return q};q.stopAll=function x(){Object.keys(o).forEach(function z(A){q.stop(A)});return q};q.error=function v(A){if(Object.type(A)==="Object"){if(typeof A.type==="string"){var z="\n\nOrigin: "+(A.origin||"General")+"\nCalling context: "+(A.name||"Unknown")+"\nMessage: "+(A.msg||"");switch(A.type.toLowerCase()){case"type":throw new TypeError(z);case"reference":throw new ReferenceError(z);case"syntax":throw new SyntaxError(z);default:throw new Error(A.type+z)}}else{throw new TypeError("Core: error() called with wrong arguments")}}return q};q.Promise=function s(){u.verify(this);return c.Deferred.apply(null,arguments)};q.when=function n(){u.verify(this);return c.when.apply(null,arguments)};q.extend=function k(){u.verify(this);return c.extend.apply(null,arguments)};q.plugin=function w(z){if(typeof z==="function"){z.apply(q,[g,f,c,u,q,r,l])}return q};u.verify=function(z){if(z.sb!==r){q.error({type:"reference",origin:"Core",name:"verify() -> "+(z.name||"(no caller available)"),msg:"Unauthorized call of Core method. Call this method through the Sandbox only"})}};u.formatStacktrace=function(A){if(Object.type(A)==="String"){var z=A.split(/\n/);if(z&&z.length){return z.map(function(B){var C=B.split(/@/);if(C&&C.length){if(Object.type(C[1])==="String"){return C[0].substr(0,40)+"\t->\t"+C[1].substr(C[1].lastIndexOf("/")).slice(1,40)}}}).join("\n")}}return""};return q}());d.Core=h}(window,window.document,jQuery));!(function _init_wrap(d,i,b){var a=d.ir=d.ir||{},c=a.apps=a.apps||{},g=a.components=a.components||{},e=g.Core,h=(function f(){var m={},j={TemplateToolkit:d.TemplateToolkit||{},isJSON:/^(?:\{.*\}|\[.*\])$/};m.name="InterRed Seitenvorschau";m.version=0.6;m.toStr=Object.prototype.toString;m.hasOwn=Object.prototype.hasOwnProperty;m.type=Object.type;m.ua=navigator.userAgent;m.setTTvar=function n(){if(arguments.length){var o=arguments[0];if(m.type(o)==="Object"){Object.keys(o).forEach(function p(r){j.TemplateToolkit[r]=j.isJSON.test(o[r])?JSON.parse(o[r]):o[r]})}else{if(typeof o==="string"&&typeof arguments[1]==="string"){var q=arguments[1];j.TemplateToolkit[o]=j.isJSON.test(q)?JSON.parse(q):q}else{e.error({type:"type",origin:"App init",name:"_setTTvar()",msg:"object or string/string arguments expected, received"+Object.type(o)+"/"+Object.type(arguments[1])+" instead"})}}}};m.getTTvar=m.T=function l(o){return j.TemplateToolkit[o]};m.TT=j.TemplateToolkit;m.createCSS=(function k(){var s=i.createElement("div"),p=s.style,r=null,q={};return function o(t){t=t.replace(/^./,t.charAt(0).toUpperCase()).replace(/-/,"");if(t in q){return q[t]}for(var v in p){if(v.toLowerCase()===t.toLowerCase()){q[t]=v;return v}}"Moz Webkit ms O".split(" ").some(function u(w){r=w+t;if(t in p){r=q[t]=t;return true}if(r in p){q[t]=r;return true}for(var x in p){if(x.toLowerCase()===r.toLowerCase()){r=q[t]=x;return true}}r=null});return r}}());return m}());if(e){e.registerApplication(c.PagePreview=h)}else{throw new TypeError("PagePreview init: Core not available - aborting.")}}(window,window.document));!(function _core_plugin_ajax_wrap(){Object.lookup("ir.components.Core.plugin",0).execute(function(g,j,d,i,e,f,h,c){var a=h.TT;e.request=function b(k){i.verify(this);k=k||{};return d.ajax({url:k.url||a.serverscript,type:k.type||"POST",dataType:k.dataType||"json",beforeSend:k.beforeSend||d.noop,data:d.extend({sid:a.sid,rm:k.rm||""},k.data||{}),success:k.success||d.noop,error:k.error||d.noop,complete:k.complete||d.noop})}})}());!(function _core_plugin_ajax_wrap(){Object.lookup("ir.components.Core.plugin",0).execute(function(e,k,b,j,c,d,i,a){j.messagePool={};c.dispatch=function g(m){j.verify(this);if(Object.type(m)==="Object"){if(typeof m.name==="string"){if(m.name in j.messagePool){j.messagePool[m.name].forEach(function l(o){try{o.callback.apply(o.scope,[m])}catch(n){c.error({type:"error",origin:"Core COM",name:"_dispatch -> _forEach",msg:'unable to dispatch event "'+m.name+'". Original error: "'+n.message+'"'})}})}}else{c.error({type:"syntax",origin:"Core COM",name:"_dispatch",msg:"expected an event type as string"})}}else{c.error({type:"syntax",origin:"Core COM",name:"_dispatch",msg:"expected an object"})}return c};c.listen=function h(l,o,m){j.verify(this);if(Object.type(l)!=="Array"){l=[l]}l.forEach(function n(p){if(typeof p==="string"){if(typeof j.messagePool[p]==="undefined"){j.messagePool[p]=[]}if(typeof o==="function"){j.messagePool[p].push({callback:o,scope:m||null})}}else{c.error({type:"syntax",origin:"Core COM",name:"_listen",msg:"expected a string value (or an Array of strings), received "+Object.type(p)+" instead"})}});return c};c.forget=function f(l,m){j.verify(this);if(j.messagePool[l]&&Object.type(j.messagePool[l])==="Array"){if(Object.type(l)!=="Array"){l=[l]}l.forEach(function(n){if(typeof n==="string"){if(m===a){j.messagePool[n]=[]}else{j.messagePool[n]=j.messagePool[n].filter(function(o){return o.callback!==m})}}else{c.error({type:"syntax",origin:"Core COM",name:"_forget",msg:"expected a string value (or an Array of strings)"})}})}return c}})}());!(function _core_plugin_ajax_wrap(){Object.lookup("ir.components.Core.plugin",0).execute(function(f,j,c,i,d,e,h,b){d.data=function a(n,m,o){i.verify(this);var l=c.data(n,m,o);return o?this:l};d.removeData=function g(m,l){i.verify(this);c.removeData(m,l);return d};d.hasData=function k(l){i.verify(this);return c.hasData(l)}})}());!(function _core_plugin_ajax_wrap(){Object.lookup("ir.components.Core.plugin",0).execute(function(D,c,s,q,v,j,h,o){var E=Array.prototype.push,g=Array.prototype.slice,G=Array.prototype.forEach,C=s.fn.css;v.$=function r(M,N){q.verify(this);function O(P){this.constructor=r;E.apply(this,s(P,N).get())}O.prototype=q.DOM;O.constructor=r;return new O(M)};v.ready=function d(M){q.verify(this);s.fn.ready.call(v,M);return v};q.DOM={each:function F(){return s.fn.each.apply(this,arguments)},map:function p(){return s.fn.map.apply(this,arguments)},queue:function e(){return s.fn.queue.apply(this,arguments)},pushStack:function A(){return s.fn.pushStack.apply(this,arguments)},domManip:function k(){return s.fn.domManip.apply(this,arguments)},dequeue:function K(){return s.fn.dequeue.apply(this,arguments)},push:E,clone:function m(){var M=this.constructor(),N=arguments;E.apply(M,s.fn.clone.apply(this,N).get());return M},find:function y(){var M=this.constructor(),N=arguments;E.apply(M,s.fn.find.apply(this,arguments).get());this.constructor=null;this.prototype=null;return M},get:function I(M){return s.fn.get.call(this,M)},toArray:function H(){return s.fn.toArray.call(this)},bind:function b(N,M){s.fn.bind.call(this,N,M);return this},unbind:function t(O,N,M){s.fn.unbind.call(this,N,M);return this},css:function B(N,M){if(M===""||M){s.fn.css.call(g.call(this,0),N,M);return this}else{return s.fn.css.call(g.call(this,0),N)}},animate:(function f(){var M=h.createCSS("Transition");if(M){return function N(O,Q,S,R){var P=this;if(Object.type(O)==="Object"&&typeof Q==="number"){Object.map(O,function(T,U){return[h.createCSS(T),U]});G.call(P,function(T){C.call([T],M,"all "+Q/1000+"s "+(R&&typeof R==="string"?R:"ease"));C.call([T],T.aniprops=O);setTimeout(function(){C.call([T],M,"");if(typeof S==="function"&&!T.stopAnimation){S.apply(T,[])}else{delete T.stopAnimation}},Q+200)});return P}else{v.error({type:"type",origin:"Core DOM",name:"_animate()",msg:"object/number expected, received "+Object.type(O)+"/"+Object.type(Q)+" instead"})}}}else{return function N(){var O=this;s.fn.animate.apply(O,arguments);return O}}}()),stop:(function a(){var N=h.createCSS("Transition");if(N){return function M(P){var O=this;O.each(function(Q,R){R.stopAnimation=true;s.fn.css.call([R],N,"");if(P){}});return O}}else{return function M(){var O=this;s.fn.stop.apply(O,arguments);return O}}}()),slice:function i(){var M=this.constructor(),N=arguments;E.apply(M,(g.apply(this,N)));return M},delegate:function z(M,O,N){s.fn.live.call(this,O,N,o,M);return this},undelegate:function J(M,O,N){if(arguments.length===0){s.fn.unbind.call(this,"live")}else{s.fn.die.call(this,O,null,N,M)}return this},remove:function w(){s.fn.remove.call(this);return this},append:function L(){s.fn.append.apply(this,arguments);return this},appendTo:function n(){s.fn.appendTo.apply(this,arguments);return this},after:function x(){s.fn.after.apply(this,arguments);return this},insertAfter:function l(){s.fn.insertAfter.apply(this,arguments);return this},delay:function u(O,P){var N=this,M=g.apply(arguments,[2]);if(typeof P==="string"){P=N[P]}setTimeout(function(){P.apply(N,M)},O);return N}}})}());!(function _sandbox_wrap(f,e,a){var d=f.ir=f.ir||{},c=d.components=d.components||{},g=function b(k){var j={},h={};function i(l){if(l in k&&typeof k[l]==="function"){j[l]=function(){k[l].apply({sb:g,name:l},arguments)}}else{k.error({type:"reference",origin:"Sandbox",name:"assign",msg:'Method "'+l+'" not available in Core'})}}h.access=["error","listen","dispatch","forget","request","Promise","when","$","ready","data","removeData","hasData","extend"];if(Object.type(k)==="Object"){h.access.forEach(function(l){i(l)});return j}else{throw new ReferenceError("Sandbox: No Core specified")}};c.Sandbox=g}(window,window.document));!(function _module_wrap(g,f,c){var e=g.ir=g.ir||{},d=e.components=e.components||{},b=function a(m,l){var k={},h={};k.init=function j(){m.error({type:"custom",origin:"Module Constructor",name:"_init()",msg:"missing init() implementation"})};k.destroy=function i(){m.error({type:"custom",origin:"Module Constructor",name:"_destroy()",msg:"missing destroy() implementation"})};k.multipleInstances=false;return k};d.ModuleCtor=b}(window,window.document));!(function _application_wrap(d){var c=d.ir=d.ir||{},b=c.components=c.components||{},g=c.apps=c.apps||{};if(Object.hasKeys(b,"Core Sandbox")&&Object.hasKeys(g,"PagePreview")){var e=b.Core,f=b.Sandbox,a=b.Modules;e.registerSandbox(f);e.startAll()}else{throw new ReferenceError("PagePreview: unable to resolve necessary application object")}}(window));